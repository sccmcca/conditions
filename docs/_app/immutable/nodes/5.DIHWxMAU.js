const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/leaflet.CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{b,_ as g}from"../chunks/BxltrvEw.js";import"../chunks/DsnmJJEf.js";import"../chunks/B63R2R9y.js";import{o as x,s as w}from"../chunks/BURIssQs.js";import{ak as y,al as I,ar as $,am as k,an as A,as as E,m as h,t as L,ao as r,$ as O,ap as T,aq as d,a8 as C,ai as P}from"../chunks/CmB87Cng.js";import{h as j}from"../chunks/BF8EGHsg.js";import{i as M}from"../chunks/BFDIsEjZ.js";import{p as R}from"../chunks/Dh22TL6g.js";var V=I('<div class="map-page svelte-w85nl5"><div class="map-container svelte-w85nl5"></div> <div class="info svelte-w85nl5"><p class="svelte-w85nl5"> </p></div></div>');function F(u,p){y(p,!1);let e=R(p,"data",8),s=L(),o;x(async()=>{const a=await g(()=>import("../chunks/7ah4FPQk.js").then(t=>t.l),[],import.meta.url);if(await g(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),o=a.map(h(s)).setView([45.5017,-73.5673],2),a.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"© OpenStreetMap contributors © CARTO",subdomains:"abcd",maxZoom:20}).addTo(o),e().geotaggedImages.forEach(t=>{const i=a.divIcon({html:`<img src="${t.thumbnail}" style="width: 40px; height: 53px; object-fit: cover; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);" />`,iconSize:[40,53],iconAnchor:[20,53],popupAnchor:[0,-53],className:"custom-thumbnail-marker"}),_=a.marker([t.latitude,t.longitude],{icon:i}).addTo(o),f=`
        <div style="width: 240px; height: 320px; display: flex; align-items: center; justify-content: center; overflow: hidden;">
          <img src="${t.thumbnail}" 
               style="width: 100%; height: 100%; object-fit: contain;" 
               alt="${t.filename}" />
        </div>
      `;_.bindPopup(f,{maxWidth:240,minWidth:240})}),e().geotaggedImages.length>0){const t=a.latLngBounds(e().geotaggedImages.map(i=>[i.latitude,i.longitude]));o.fitBounds(t,{padding:[50,50]})}}),M();var n=V();j(a=>{E.title="Map - Conditions of Observation"});var m=r(n);b(m,a=>O(s,a),()=>h(s));var l=T(m,2),c=r(l),v=r(c);d(c),d(l),d(n),$(()=>w(v,`${P(e()),C(()=>e().geotaggedImages.length)??""} geotagged images`)),k(u,n),A()}export{F as component};
